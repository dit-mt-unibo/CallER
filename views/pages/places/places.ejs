<h1 class="display-4">Contenuti</h1>
<table class="table table-striped">
    <thead>
        <tr>
            <th>#</th>
            <th>Nome</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <% data.forEach(function(place){ %>
            <tr>
                <td><%= place.id %></td>
                <td><%= place.name %></td>
                <td>
                    <a href="/place/edit/<%= place.id %>" class="btn btn-primary">Modifica</a>
                    <a href="/place/delete/<%= place.id %>" class="btn btn-danger confirm-delete" title="Elimina" data-toggle="modal" data-target="#confirmDeleteModal" id="deleteButton<%= place.id %>">Elimina</a>
                </td>
            </tr>
        <% }); %>
    </tbody> 
</table>

<a class="btn btn-success" href="/place/add">Aggiungi</a>

    <!-– Delete button will redirect to the href of the element with 'id = caller-id' property in this modal-–>
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" caller-id="" role="dialog" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body confirm-delete">
            Vuoi eliminare questo contenuto?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Annulla</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal" id="confirmDeleteButtonModal">Elimina</button>
          </div>
        </div>
      </div>
    </div>
            
      <script>
        $(document).on('click', '.confirm-delete', function () {
          $("#confirmDeleteModal").attr("caller-id", $(this).attr("id"));
        });

        $(document).on('click', '#confirmDeleteButtonModal', function () {
          var caller = $("#confirmDeleteButtonModal").closest(".modal").attr("caller-id");
          window.location = $("#".concat(caller)).attr("href");
        });
      </script>


<%- exposeLocalsToBrowser() %>

